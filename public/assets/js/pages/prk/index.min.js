var prk_id=window.location.href.split("/")[4],materials;$(document).ready((async function(){$("#jasaTbl").DataTable(),$("#materialTbl").DataTable(),$("#fileTbl").DataTable(),materials=await getBaseMaterials(),callbackBaseMaterial(materials)})),$(".prk-field").on("change",(async function(){await updatePRK(prk_id,$("#prkForm").serialize(),callbackPRKChange)})),$("#createJasaBtn").on("click",(function(){jasaModalOpenCallback("create")})),$("#saveJasaBtn").on("click",(async function(){await jasaSaveService(prk_id,$("#jasaForm").serialize(),jasaSaveCallback)})),$(document).on("click",".editJasaBtn",(function(){let data={id:$(this).data("id"),nama:$(this).data("nama"),harga:$(this).data("harga")};jasaModalOpenCallback("update",data)})),$("#updateJasaBtn").on("click",(async function(){let jasa_id=$("input[name=jasa_id]").val();await jasaUpdateService(prk_id,jasa_id,$("#jasaForm").serialize(),jasaUpdateCallback)})),$(".deleteJasaBtn").on("click",(function(){deleteModalOpenCallback("jasa",$(this).data("id"))})),$("#deleteJasaBtn").on("click",(function(){let jasa_id=$("input[name=jasa_id]").val();jasaDeleteService(prk_id,jasa_id,jasaDeleteCallback)})),$("#createMaterialBtn").on("click",(function(){materialModalOpenCallback("create")})),$("input[name=base_material_id]").on("change",(async function(){baseMaterialIDChangeCallback($(this).val(),materials)})),$("#saveMaterialBtn").on("click",(async function(){await materialSaveService(prk_id,$("#materialForm").serialize(),materialSaveCallback)})),$(document).on("click",".editMaterialBtn",(function(){let data={id:$(this).data("id"),base_material_id:$(this).data("base-material-id"),normalisasi:$(this).data("normalisasi"),nama:$(this).data("nama"),deskripsi:$(this).data("deskripsi"),satuan:$(this).data("satuan"),harga:$(this).data("harga"),jumlah:$(this).data("jumlah")};materialModalOpenCallback("update",data)})),$("#updateMaterialBtn").on("click",(async function(){let material_id=$("input[name=material_id]").val();await materialUpdateService(prk_id,material_id,$("#materialForm").serialize(),materialUpdateCallback)})),$(document).on("click",".deleteMaterialBtn",(function(){deleteModalOpenCallback("material",$(this).data("id"))})),$("#deleteMaterialBtn").on("click",(function(){let material_id=$("input[name=material_id]").val();materialDeleteService(prk_id,material_id,materialDeleteCallback)})),$("#createFileBtn").on("click",(function(){fileModalOpenCallback()})),$("#saveFileBtn").on("click",(async function(){let data=new FormData;data.append("file",$("input[name=file]")[0].files[0]),data.append("deskripsi",$("textarea[name=file_deskripsi]").val()),await fileSaveService(prk_id,data,fileSaveCallback)})),$(document).on("click",".deleteFileBtn",(function(){deleteModalOpenCallback("file",$(this).data("id"))})),$("#deleteFileBtn").on("click",(function(){let file_id=$("input[name=file_id]").val();fileDeleteService(prk_id,file_id,fileDeleteCallback)}));