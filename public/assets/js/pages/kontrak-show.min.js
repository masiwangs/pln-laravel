$(document).ready(function(){const e=$("#createFileBtn"),t=$("#fileModal"),a=$("#deleteModal"),n=$("#deleteModalLabel"),l=$("#deleteFileBtn"),d=$("#deleteJasaBtn"),i=$("#deleteMaterialBtn"),o=$("#fileTbl>tbody"),s=$("input[name=file_id]"),c=$("input[name=file]"),r=$("textarea[name=file_deskripsi]"),u=$("#saveFileBtn");e.on("click",function(){t.modal("show")}),u.on("click",function(){let e=new FormData;e.append("file",c[0].files[0]),e.append("deskripsi",r.val()),$.ajax({url:window.location.href+"/file",method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:e,success:function(e){o.append(`<tr><td><p class="mb-0">${e.data.nama}</p><small>${e.data.deskripsi.substr(0,200)}</small></td><td><div class="d-flex justify-content-end"><a href="/storage/${e.data.url}" target="_blank" class="btn btn-primary me-2">Unduh</a><button class="btn btn-warning me-2">Edit</button><button class="btn btn-danger">Hapus</button></div></td></tr>`),t.modal("hide")}})}),$(document).on("click",".deleteFileBtn",function(){n.text("Hapus File"),l.show(),d.hide(),i.hide(),s.val($(this).data("id")),a.modal("show")}),l.on("click",function(){let e=s.val();$.ajax({url:window.location.href+"/file/"+e,method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"JSON",success:function(t){$("#file-"+e).remove(),a.modal("hide")}})})});